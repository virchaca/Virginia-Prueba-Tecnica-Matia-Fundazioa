<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./images/pencil_color.png" type="image/png" />
    <link rel="stylesheet" href="./css/styles.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=stat_minus_1"
    />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
    />

    <title>Prueba Técnica Matia Fundazioa</title>
  </head>
  <body>
    <header class="header">
      <img
        class="logo-matia"
        src="./images/matia-logotipo-2021.png"
        alt="Matia Fundazioa"
        class="logo"
      />
      <h1 class="page-title">Sistema de Gestión de Pacientes</h1>
    </header>

    <main>
      <!-- funcionalidad aplicación -->
      <div class="div-info">
        <p class="p-info p-info-js">
          Detalles sobre la funcionalidad de la aplicación
          <span class="material-symbols-outlined down-js">
            keyboard_arrow_down
          </span>
          <span class="material-symbols-outlined up-js hidden">
            keyboard_arrow_up
          </span>
        </p>
        <ul class="ul-info ul-info-js hidden">
          <li>
            Mejoras de accesibilidad: Al rellenar los campos, se puede insertar el usuario pulsando la tecla Enter, excepto si se está dentro de un select. En ese caso, se tiene que tabular hasta el botón para no enviar el formulario por error al estar seleccionando país o provincia.
          </li>
          <li>
            Mensajes de error: Cuando hay errores, salen mensajes de error en rojo y se resalta el input donde hay error.
          </li>
          <li>Validación de email: El email se valida con el formato email@email.com.</li>
          <li>
            Validación del teléfono: El teléfono no es obligatorio, pero si se introduce, se valida con el
            formato adecuado
          </li>
          <li>
            Mensaje de éxito: Al registrar un nuevo usuario, sale un mensaje de éxito que desaparece después de 5 segundos.
          </li>
          <li>
            Validación de usuario existente: No se puede registrar un usuario cuyo nombre y apellido ya existe. Sí se puede repetir el email, puesto que varios usuarios pueden tener el mismo email de contacto.
          </li>
          <li>
            Almacenamiento de usuarios: A falta de base de datos, los usuarios registrados se almacenan en un array, que se guarda en localStorage, y se recorre el array para rellenar la tabla de usuarios registrados.
          </li>
          <li>
            Campos obligatorios: Para registrar un usuario, son obligatorios los campos nombre, apellido e email.
          </li>
          <li>
            Buscador de usuarios: Se ha añadido un buscador sencillo para filtrar los usuarios por nombre y apellidos y país. El buscador genera una lista con los usuarios filtrados. Pensé en filtrar directamente la tabla pasando como
            argumento a la funcion de la tabla el arrray de usuarios filtrados, pero luego pensé que sería útil tener la tabla intacta y una lista independiente con los usuarios filtrados. La lista la numero usando el índice del array de usarios filtrados
          </li>
          <li>
            Contacto directo: Tanto desde la lista como desde la tabla, se puede enviar un email o llamar por teléfono directamente al contacto.
          </li>
          <li>
            Comentarios en el código: No es una buena práctica dejar los console.log en el archivo JS, pero al tratarse de una prueba técnica, los he dejado comentados.
          </li>
          <li>Scroll lateral para la tabla: A medida que se reduce el tamaño del dispositvo, la tabla se vuelve más ancha que su contenedor. No se ve entera en la pantalla y se produce un desbordamiento horizonta. He implementado un scroll lateral tanto para navegación con teclado, como con el ratón, mediante JS, para mayor comodidad, ya que muchos usuarios prefieren interactuar con la interfaz de usuario directamente con el ratón. Esto permite a los usuarios hacer clic y arrastrar la tabla para desplazarse por ella.  
          </li>
        </ul>
      </div>

      <h2 class="h2">Formulario de registro</h2>
      <!-- formulario -->
      <section class="fieldset-form">
        <p id="name-error" class="error-msg" aria-live="polite"></p>
        <p id="message-success" class="message-success" aria-live="polite"></p>
        <form class="form-registry" id="form-registry">
          <div class="form-group">
            <div class="label-container">
              <label class="form-label" for="name"
                >Nombre <span class="span-required">*</span></label
              >
              <input
                class="name-js form-input"
                type="text"
                name="name"
                id="name"
                placeholder="Introduce tu nombre"
                required
              />
            </div>

            <div class="label-container">
              <label class="form-label" for="surname"
                >Apellidos <span class="span-required">*</span></label
              >
              <input
                class="surname-js"
                type="text"
                name="surname"
                id="surname"
                placeholder="Introduce tus apellidos"
                required
              />
            </div>

            <div class="label-container">
              <label class="form-label" for="phone">Teléfono</label>
              <input
                class="phone-js"
                type="tel"
                name="phone"
                id="phone"
                placeholder="+34 666 666 666"
              />
            </div>

            <div class="label-container">
              <label class="form-label" for="email"
                >Correo electrónico <span class="span-required">*</span></label
              >
              <input
                class="email-js"
                type="email"
                name="email"
                id="email"
                placeholder="email@email.com"
                required
              />
            </div>

            <div class="label-container">
              <label class="form-label" for="country">País </label>
              <select class="country-js" name="country" id="country">
                <option value="">Selecciona país</option>
                <!-- Cargar de API al arrancar la página, siempre cargado -->
              </select>
            </div>

            <div class="label-container">
              <label class="form-label" for="state">Provincia</label>
              <select class="state-js" name="state" id="state">
                <option value="">Selecciona provincia</option>
                <!-- Cargar de API cogiendo VALUE DEL PAIS y pasándolo por body -->
              </select>
            </div>
          </div>

          <div class="form-button">
            <button class="add-btn add-btn-js" id="add-btn" type="button">
              AÑADIR
            </button>
            <p class="span-required-text">
              * Los campos con asterisco son obligatorios
            </p>
            <!-- <input class="add-btn" type="button" value="AÑADIR" /> -->
          </div>
        </form>
      </section>

      <h2>Usuarios registrados</h2>
      <!-- Filtros -->
      <div class="filters">
        <img
          src="./images/worker_form.png"
          alt="Icono de búsqueda"
          class="img-filter"
        /><span>Busca usuarios por </span>
        <label for="filter-name">nombre y apellidos:</label>
        <input
          type="text"
          id="filter-surname"
          placeholder=" José Matia Calvo"
        />

        <label for="filter-country">o por país:</label>
        <input type="text" id="filter-country" placeholder="spain" />

        <buton
          class="add-btn"
          type="submit"
          id="delete-button">Borrar</button>
      </div>

      <ol class="ol-filter" id="ol-filter"></ol>

      <!-- tabla de usuarios -->
      <section class="table-container table-container-js">        
        <table class="table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Apellidos</th>
                <th>Teléfono</th>
                <th>Correo electrónico</th>
                <th>País</th>
                <th>Provincia</th>
              </tr>
            </thead>
            <tbody class="tbody-js">
              <tr>
                <td></td><td></td><td></td><td></td><td></td>
                <td></td>
              </tr>
            </tbody>
          </table>
      </section>
    </main>

    <footer class="footer">
      <p>Virginia Alvarez Perez</p>
      <p>Prueba técnica Matia Fundazioa</p>
    </footer>

    <script src="./js/index.js"></script>
  </body>
</html>
